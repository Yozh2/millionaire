/* Button-specific interaction tweaks on top of Tailwind utilities */

.engine .answer-btn {
  transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
  --glare-width: 60%;
  --glare-duration: 0.45s;
  --glare-press-duration: 0.2s;
  /* Keep glare a bit softer than action buttons. */
  --glare-opacity: 0.78;
  --glare-blur: 5px;
}


/* Hover effect - slight lift */
@media (hover: hover) and (pointer: fine) {
  .engine .answer-btn:not(:disabled):hover {
    transform: scale(1.02) translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
  }
}

/* Button press effect - "pushed in" */
.engine .answer-btn:not(:disabled):active {
  transform: scale(0.97) translateY(2px);
  box-shadow: inset 0 3px 8px rgba(0, 0, 0, 0.4);
  transition: transform 0.05s ease-out, box-shadow 0.05s ease-out;
}

/* Disabled answers: keep them visually "pressed in" like a used/locked button. */
.engine .answer-btn:disabled {
  transform: scale(0.97) translateY(2px);
}

/* Selected answer: return to "ground level" even though answers become disabled after selection. */
.engine .answer-btn.answer-btn--selected:disabled {
  transform: scale(1) translateY(0);
}

/* ============================================
   Action Buttons (Start Game, New Game)

   States:
   1. Rest: button at "ground level" (scale 1, normal brightness)
   2. Hover/Touch: button lifts UP (scale 1.08), glare →, brighter
   3. Active/Press: button SLAMS DOWN (scale 0.95), glare ←, darker, dust puff
   4. Release outside: returns to rest smoothly
   5. Release inside: triggers click → next screen
   ============================================ */

/* Dust puff - outward oval glow burst */
@keyframes dust-puff {
  0% {
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.5),
      inset 0 2px 6px rgba(0, 0, 0, 0.3);
  }
  15% {
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.5),
      -20px 4px 20px 2px var(--btn-glow, rgba(255, 200, 0, 0.6)),
      20px 4px 20px 2px var(--btn-glow, rgba(255, 200, 0, 0.6)),
      -38px 2px 15px 1px var(--btn-glow, rgba(255, 200, 0, 0.4)),
      38px 2px 15px 1px var(--btn-glow, rgba(255, 200, 0, 0.4)),
      0 6px 25px 3px var(--btn-glow, rgba(255, 200, 0, 0.5)),
      inset 0 2px 6px rgba(0, 0, 0, 0.3);
  }
  100% {
    box-shadow:
      0 2px 8px rgba(0, 0, 0, 0.5),
      -55px 8px 35px 4px transparent,
      55px 8px 35px 4px transparent,
      -80px 4px 28px 3px transparent,
      80px 4px 28px 3px transparent,
      0 12px 40px 5px transparent,
      inset 0 2px 6px rgba(0, 0, 0, 0.3);
  }
}

.engine .action-btn {
  transform: scale(1);
  transform-origin: center center;
  filter: brightness(1);
  transition:
    transform 0.25s cubic-bezier(0.34, 1.2, 0.64, 1),
    filter 0.25s ease-out,
    box-shadow 0.25s ease-out;
  z-index: 10;
  --glare-width: 60%;
  --glare-blur: 4px;
  --glare-duration: 0.35s;
  --glare-press-duration: 0.2s;
}

/* ---- STATE 2: HOVER (lifted, bright, glare →) ---- */
@media (hover: hover) and (pointer: fine) {
  .engine .action-btn:not(:disabled):hover {
    transform: scale(1.08);
    filter: brightness(1.15);
    box-shadow:
      0 8px 25px rgba(0, 0, 0, 0.3),
      0 0 40px var(--btn-glow, rgba(255, 200, 0, 0.3));
  }
}

/* FSM-driven hover (keeps visual lift in sync with glare on browsers where :hover is quirky). */
@media (hover: hover) and (pointer: fine) {
  .engine .action-btn[data-btn-state='Hover']:not(:disabled) {
    transform: scale(1.08);
    filter: brightness(1.15);
    box-shadow:
      0 8px 25px rgba(0, 0, 0, 0.3),
      0 0 40px var(--btn-glow, rgba(255, 200, 0, 0.3));
  }
}

/* Touch devices: active state acts as hover+press combined */
@media (hover: none) {
  .engine .action-btn:not(:disabled):active {
    transform: scale(0.94);
    filter: brightness(0.85);
    animation: dust-puff 0.5s ease-out forwards;
  }
}

/* Ensure press-down starts immediately on :active (important for Chrome device emulation quirks). */
.engine .action-btn:not(:disabled):active {
  transform: scale(0.94);
  filter: brightness(0.85);
  transition:
    transform 0.08s ease-out,
    filter 0.08s ease-out;
}

/* ---- STATE 3: ACTIVE/PRESS (slammed down, dark, glare ←, dust puff) ---- */
@media (hover: hover) and (pointer: fine) {
  .engine .action-btn:not(:disabled):active {
    transform: scale(0.94);
    filter: brightness(0.85);
    animation: dust-puff 0.5s ease-out forwards;
    transition:
      transform 0.08s ease-out,
      filter 0.08s ease-out;
  }
}

/* FSM-driven press: ensures the button "slams down" at the same time as press glare (esp. on touch). */
.engine .action-btn[data-btn-state='Press']:not(:disabled) {
  transform: scale(0.94);
  filter: brightness(0.85);
  animation: dust-puff 0.5s ease-out forwards;
  transition:
    transform 0.08s ease-out,
    filter 0.08s ease-out;
}

/* Disabled action buttons: keep them pressed in (same position as press). */
.engine .action-btn:disabled {
  transform: scale(0.94);
  filter: brightness(0.85);
}

/* ============================================
   Lifeline Buttons (50:50, Phone, Audience, etc.)
   Glow on hover, press effect
   ============================================ */
.engine .lifeline-btn {
  transform: scale(1) translateY(0);
  transition: transform 0.12s ease-out, box-shadow 0.12s ease-out, filter 0.12s ease-out;
  --glare-width: 60%;
  /* Slightly softer glare than action. */
  --glare-blur: 4.5px;
  --glare-duration: 0.3s;
  --glare-press-duration: 0.2s;
  --glare-opacity: 0.78;
}

/* Hover state - lift up and glow */
/* Only apply hover effects on devices with true hover capability */
@media (hover: hover) and (pointer: fine) {
  .engine .lifeline-btn:not(:disabled):hover {
    transform: translateY(-3px);
    box-shadow:
      0 6px 20px rgba(0, 0, 0, 0.3),
      0 0 20px var(--lifeline-glow, rgba(255, 200, 0, 0.4));
    filter: brightness(1.1);
  }
}

/* Active/pressed state - push down */
.engine .lifeline-btn:not(:disabled):active {
  transform: scale(0.95) translateY(2px);
  box-shadow:
    0 2px 8px rgba(0, 0, 0, 0.3),
    inset 0 2px 8px rgba(0, 0, 0, 0.3);
  filter: brightness(0.95);
  transition: transform 0.06s ease-out, box-shadow 0.06s ease-out, filter 0.06s ease-out;
}

/* Disabled lifelines: keep them visually "pressed in" like a used/locked button. */
.engine .lifeline-btn:disabled {
  transform: scale(0.95) translateY(2px);
  filter: brightness(0.85);
}
